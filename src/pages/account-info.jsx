import React, { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import Navbar from '../components/Nav';
import UserDetail from '../components/user/UserDetail';
import UserBookings from '../components/user/UserBookings';
import ChangePassword from '../components/user/ChangePassword';

const AccountSidebar = () => {
    const { user } = useAuth();
    const [activeComponent, setActiveComponent] = useState('userDetail');
    

    return (
        <div>
            <Navbar />
            <div className="container mx-auto px-32">
                <div className="flex mb-6">
                    <button className="flex text-black font-medium text-lg items-center" onClick={() => window.history.back()}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path fill="#000" fillRule="evenodd" d="M5.47 12.53a.75.75 0 0 1 0-1.06l4-4a.75.75 0 1 1 1.06 1.06l-2.72 2.72H18a.75.75 0 0 1 0 1.5H7.81l2.72 2.72a.75.75 0 1 1-1.06 1.06z" clipRule="evenodd"></path></svg> 
                        Quay lại
                    </button>
                </div>

                <h1 className="font-bold text-4xl text-center text-blue-800 mt-8 mb-6">
                    Tài khoản của bạn
                </h1>

                <div className="flex gap-8">
                    {/* Sidebar */}
                    <div className='w-1/4 border border-gray-500 rounded-lg p-4 max-h-[290px]'>
                        <div className='flex gap-4 border-b border-gray-400 pb-4 items-center'>
                        <img
                                src={`http://localhost:4000${user?.avatar}`} 
                                alt="Avatar"
                                className="w-12 h-12 rounded-full border border-black"
                            />
                            <div>
                                <div className="font-bold text-lg">{user?.name}</div>
                                <div className="text-gray-600">{user?.email}</div>
                            </div>
                        </div>

                        <div className="flex flex-col mt-3 px-6 font-semibold">
                            <div className='flex items-center justify-start text-center'>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M7.887 8.67c1.19 0 2.22-.427 3.061-1.27a4.2 4.2 0 0 0 1.269-3.065c0-1.19-.427-2.222-1.269-3.065A4.19 4.19 0 0 0 7.887 0c-1.19 0-2.22.427-3.062 1.27a4.2 4.2 0 0 0-1.269 3.065c0 1.192.427 2.223 1.269 3.066a4.2 4.2 0 0 0 3.062 1.27M5.57 2.017c.646-.647 1.404-.961 2.317-.961.912 0 1.67.314 2.316.96.646.648.96 1.406.96 2.32s-.314 1.673-.96 2.32-1.404.96-2.316.96c-.913 0-1.67-.314-2.317-.96-.646-.647-.96-1.406-.96-2.32s.314-1.672.96-2.32M15.464 13.841c-.025-.35-.074-.733-.146-1.137a9 9 0 0 0-.28-1.144 5.7 5.7 0 0 0-.47-1.066 4 4 0 0 0-.707-.924 3.1 3.1 0 0 0-1.017-.64 3.5 3.5 0 0 0-1.299-.235c-.183 0-.36.075-.703.299a95 95 0 0 1-.734.473c-.235.15-.554.29-.948.418a3.8 3.8 0 0 1-1.16.188c-.386 0-.776-.063-1.16-.188a4.2 4.2 0 0 1-.949-.418q-.411-.263-.734-.473c-.342-.224-.52-.3-.703-.3-.468 0-.904.08-1.299.236a3.1 3.1 0 0 0-1.017.64 4 4 0 0 0-.708.924 5.7 5.7 0 0 0-.47 1.066 9 9 0 0 0-.278 1.144c-.073.403-.122.786-.146 1.137-.024.344-.036.702-.036 1.064 0 .94.298 1.7.887 2.26.58.554 1.35.835 2.284.835h8.657c.935 0 1.704-.28 2.285-.834.589-.56.887-1.322.887-2.262 0-.362-.012-.72-.036-1.063m-1.577 2.56c-.384.366-.894.544-1.559.544H3.671c-.664 0-1.174-.178-1.558-.543-.376-.36-.56-.85-.56-1.498 0-.337.012-.67.034-.99.022-.313.066-.658.132-1.024q.097-.544.245-1.008.143-.444.382-.867a3 3 0 0 1 .52-.683 2.1 2.1 0 0 1 .677-.421q.374-.147.83-.16c.037.02.103.057.21.126q.325.214.741.48c.311.198.712.377 1.191.532.49.158.989.239 1.485.239.495 0 .995-.08 1.484-.239.48-.155.88-.334 1.191-.533.283-.18.525-.337.742-.479a3 3 0 0 1 .21-.126q.454.012.83.16c.267.106.495.248.676.421q.29.28.52.683c.16.28.288.573.382.867.098.308.181.647.246 1.008q.099.552.132 1.025c.022.318.033.651.033.99 0 .648-.183 1.138-.56 1.496"></path></svg>
                                <button className="text-left py-1 text-red-600 font-bold ml-2">Tài khoản</button>
                            </div>
                            <div className='h-full flex flex-col ml-10'>
                                <button className="text-left py-2" onClick={() => setActiveComponent('userDetail')}>Thông tin cá nhân</button>
                                <button className="text-left py-2" onClick={() => setActiveComponent('changePassword')}>Đổi mật khẩu</button>
                            </div>
                        </div>

                        <div className="mt-2 ml-6 font-semibold flex items-center justify-start">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                                <path fillRule="evenodd" d="M1.893.645c-.679 0-1.23.534-1.23 1.194v3.813c0 .66.551 1.194 1.23 1.194h10.39c.182 0 .33.145.33.323a.327.327 0 0 1-.33.322H1.892C.848 7.49 0 6.667 0 5.65V1.84C0 .823.848 0 1.893 0h3.162c.183 0 .332.144.332.322a.327.327 0 0 1-.332.323zM6.051.322c0-.178.148-.322.331-.322h11.725C19.152 0 20 .823 20 1.839v3.813c0 1.015-.848 1.839-1.893 1.839h-4.498a.327.327 0 0 1-.332-.322c0-.178.149-.323.332-.323h4.498c.679 0 1.23-.534 1.23-1.194V1.839c0-.66-.551-1.194-1.23-1.194H6.382a.327.327 0 0 1-.331-.323m1.534 2.292c-.644 0-1.166.506-1.166 1.131s.522 1.132 1.166 1.132S8.75 4.37 8.75 3.745s-.522-1.131-1.165-1.131m-1.83 1.131c0-.98.82-1.776 1.83-1.776s1.828.795 1.828 1.776-.818 1.777-1.828 1.777-1.83-.796-1.83-1.777m6.765-1.131c-.643 0-1.165.506-1.165 1.131s.522 1.132 1.165 1.132c.644 0 1.165-.507 1.165-1.132s-.521-1.131-1.165-1.131m-1.828 1.131c0-.98.818-1.776 1.828-1.776s1.829.795 1.829 1.776-.819 1.777-1.829 1.777-1.828-.796-1.828-1.777m5.26-1.776c.184 0 .332.144.332.322v.741l1.055-.941a.34.34 0 0 1 .468.019.316.316 0 0 1-.02.455l-1.255 1.121L17.9 4.968a.316.316 0 0 1 .008.455.34.34 0 0 1-.469.008L16.284 4.35v.85a.327.327 0 0 1-.331.323.327.327 0 0 1-.332-.323V2.291c0-.178.148-.322.332-.322M2 2.291c0-.178.148-.322.332-.322h.87c.563 0 1.02.444 1.02.992a.97.97 0 0 1-.185.569c.276.202.454.522.454.883 0 .61-.51 1.105-1.138 1.105l-.891.003h-.129L2.331 5.2l.001.323a.34.34 0 0 1-.235-.094.32.32 0 0 1-.098-.229V2.291m.663 1.663v.922l.69-.002a.467.467 0 0 0 .474-.46.467.467 0 0 0-.474-.461h-.69m.233-.646h-.233v-.694H3.2c.198 0 .357.155.357.347s-.16.346-.357.346zm5.41 5.598c-1.024 0-1.854.806-1.854 1.8a.327.327 0 0 1-.331.322.327.327 0 0 1-.332-.322c0-1.35 1.127-2.445 2.516-2.445s2.517 1.095 2.517 2.445a.327.327 0 0 1-.332.322.327.327 0 0 1-.332-.322c0-.994-.83-1.8-1.853-1.8m-1.18 2.042c0-.633.528-1.146 1.18-1.146.65 0 1.179.513 1.179 1.146v1.289c.156-.074.33-.115.516-.115.528 0 .975.337 1.126.802.169-.09.363-.142.57-.142.651 0 1.18.513 1.18 1.145v.248c.155-.074.33-.115.516-.115.651 0 1.18.513 1.18 1.146v2.354c0 2.452-2.047 4.44-4.572 4.44s-4.571-1.988-4.571-4.44v-2.298c0-.633.528-1.146 1.18-1.146.185 0 .36.041.516.115zm.663 4.313v1.446a.327.327 0 0 1-.332.323.327.327 0 0 1-.331-.323v-1.446c0-.277-.232-.5-.517-.5a.51.51 0 0 0-.516.5v2.299c0 2.096 1.75 3.796 3.908 3.796s3.908-1.7 3.908-3.796v-2.354a.51.51 0 0 0-.516-.502.51.51 0 0 0-.517.502v.485a.327.327 0 0 1-.331.322.327.327 0 0 1-.332-.322v-1.764a.51.51 0 0 0-.516-.5.51.51 0 0 0-.516.5v1.764a.327.327 0 0 1-.332.322.327.327 0 0 1-.332-.322v-2.423a.51.51 0 0 0-.516-.502.51.51 0 0 0-.516.502v2.423a.327.327 0 0 1-.332.322.327.327 0 0 1-.332-.322v-4.743a.51.51 0 0 0-.516-.501.51.51 0 0 0-.516.501z" clipRule="evenodd"></path>
                            </svg>
                            <button className="w-full text-left ml-2" onClick={() => setActiveComponent('userBookings')}>Đơn đặt chỗ</button>
                        </div>

                        <div className="mt-2 ml-6 font-semibold flex items-center justify-start">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path fill="#000" d="M5.92 8.161a.394.394 0 0 0-.552 0 .394.394 0 0 0 0 .553.394.394 0 0 0 .553 0 .393.393 0 0 0 0-.553"></path><path d="M18.828 0H3.281C2.635 0 2.11.526 2.11 1.172v6.484c0 .646.526 1.172 1.172 1.172h.703a.39.39 0 0 0 0-.781h-.703a.39.39 0 0 1-.39-.39V1.171c0-.216.175-.39.39-.39h15.547c.216 0 .39.174.39.39v6.484c0 .216-.174.39-.39.39h-2.613a.4.4 0 0 0-.276.115l-1.286 1.287-1.287-1.287a.4.4 0 0 0-.276-.114h-3.046A2.223 2.223 0 0 0 8.606 6.71l-.565-.172a.39.39 0 0 0-.481.24l-.888 2.453a2.96 2.96 0 0 1-1.366 1.592l-.834.453a1.11 1.11 0 0 0-.86-.407H1.114C.5 10.87 0 11.37 0 11.986v6.898C0 19.5.5 20 1.115 20h2.496c.39 0 .732-.2.932-.503l.398.157c.586.23 1.203.346 1.832.346h5.27a1.436 1.436 0 0 0 1.241-2.153 1.437 1.437 0 0 0 .802-2.103c.557-.197.957-.729.957-1.352 0-.65-.434-1.2-1.027-1.375a1.436 1.436 0 0 0-1.244-2.146H9.639l.438-1.301q.123-.367.118-.742h2.733l1.449 1.448a.39.39 0 0 0 .552 0l1.448-1.448h2.451c.646 0 1.172-.526 1.172-1.172V1.172C20 .526 19.474 0 18.828 0M3.945 18.885c0 .184-.15.334-.334.334H1.115a.334.334 0 0 1-.334-.334v-6.9c0-.184.15-.334.334-.334h.858v4.81a.39.39 0 0 0 .781 0v-4.81h.857c.146 0 .27.095.316.225a.4.4 0 0 0 .014.056.3.3 0 0 1 .004.053zm8.827-7.234a.654.654 0 0 1 0 1.306h-2.12a.39.39 0 0 0 0 .782h2.957a.654.654 0 0 1 0 1.306h-2.956a.39.39 0 1 0 0 .78h2.202a.654.654 0 0 1 0 1.307h-2.203a.39.39 0 1 0 0 .78h1.392a.654.654 0 0 1 0 1.307h-5.27a4.2 4.2 0 0 1-1.547-.293l-.5-.196v-6.702l.952-.518a3.74 3.74 0 0 0 1.728-2.012l.761-2.104.21.064c.381.116.691.375.873.728.183.354.213.757.086 1.134l-.612 1.816a.39.39 0 0 0 .37.515z"></path><path d="M18.211 3.788a.62.62 0 0 0-.504-.424l-.69-.1-.31-.627a.62.62 0 0 0-.56-.347.62.62 0 0 0-.56.348l-.308.626-.69.1a.62.62 0 0 0-.505.425.62.62 0 0 0 .159.64l.5.487-.118.688a.62.62 0 0 0 .248.61.62.62 0 0 0 .658.048l.617-.325.619.324a.62.62 0 0 0 .657-.047.62.62 0 0 0 .248-.61l-.119-.689.5-.487a.62.62 0 0 0 .158-.64m-1.262.626a.62.62 0 0 0-.18.552l.079.456-.41-.215a.62.62 0 0 0-.58 0l-.41.215.079-.455a.62.62 0 0 0-.18-.553l-.331-.322.457-.067a.62.62 0 0 0 .47-.341l.205-.415.204.414a.62.62 0 0 0 .47.342l.458.066zM13.242 3.788a.62.62 0 0 0-.504-.424l-.691-.1-.31-.627a.62.62 0 0 0-.559-.347.62.62 0 0 0-.56.348l-.308.626-.691.1a.62.62 0 0 0-.504.425.62.62 0 0 0 .158.64l.5.487-.117.688a.62.62 0 0 0 .248.61.62.62 0 0 0 .657.048l.618-.325.618.324a.62.62 0 0 0 .657-.047.62.62 0 0 0 .248-.61l-.118-.689.5-.487a.62.62 0 0 0 .158-.64m-1.263.626a.62.62 0 0 0-.179.552l.078.456-.409-.215a.62.62 0 0 0-.58 0l-.41.215.078-.455a.62.62 0 0 0-.18-.553l-.33-.322.457-.067a.62.62 0 0 0 .47-.342l.204-.414.205.414c.09.185.267.312.47.342l.457.066zM8.272 3.788a.62.62 0 0 0-.503-.424l-.691-.1-.31-.627a.62.62 0 0 0-.559-.347.62.62 0 0 0-.56.348l-.308.626-.691.1a.62.62 0 0 0-.504.425.62.62 0 0 0 .158.64l.5.487-.118.688a.62.62 0 0 0 .249.61.62.62 0 0 0 .657.048l.618-.325.618.324a.62.62 0 0 0 .657-.047.62.62 0 0 0 .248-.61l-.118-.689.5-.487a.62.62 0 0 0 .157-.64m-1.262.626a.62.62 0 0 0-.18.552l.08.456-.41-.215a.62.62 0 0 0-.58 0l-.41.215.078-.456a.62.62 0 0 0-.18-.552l-.33-.322.457-.067a.62.62 0 0 0 .47-.342l.204-.414.205.414c.09.185.266.312.47.342l.457.066zM2.363 17.475a.39.39 0 0 0-.39.39v.007a.39.39 0 0 0 .781 0v-.006a.39.39 0 0 0-.39-.391"></path></svg>
                            <button className="w-full text-left ml-2">Đánh giá của quý khách</button>
                        </div>
                    </div>

                    {/* Main content */}
                    <div className='w-3/4'>
                    {activeComponent === 'userDetail' && <UserDetail userId={user?.id}/>}
                    {activeComponent === 'changePassword' && <ChangePassword userId={user?.id} />}
                    {activeComponent === 'userBookings' && <UserBookings />}
                        
                    </div>    
                </div>    
            </div>
        </div>
    );
};

export default AccountSidebar;
